<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
    <title>TileMill</title>
    <link rel='shortcut icon' href='images/favicon.ico' type='image/x-icon' />
    <link rel='stylesheet' href='css/reset.css' type='text/css'/>
    <link rel='stylesheet' href='css/tilemill.css' type='text/css'/>

    <!-- IE includes -->
    <!--[if IE]><script src="js/libraries/excanvas.compiled.js"></script><![endif]-->

    <script type='text/javascript' src='js/libraries/md5.js'></script>
    <script type='text/javascript' src='js/libraries/base64.js'></script>
    <script type='text/javascript' src='js/libraries/jquery.js'></script>
    <script type='text/javascript' src='js/libraries/underscore-min.js'></script>
    <script type='text/javascript' src='js/libraries/backbone.js'></script>
    <script type='text/javascript' src='js/libraries/jquery-ui.js'></script>
    <script type='text/javascript' src='js/libraries/ICanHaz.min.js'></script>
    <script type='text/javascript' src='js/openlayers/OpenLayers.js'></script>
    <script type='text/javascript' src='js/libraries/farbtastic.js'></script>
    <script type='text/javascript' src='js/codemirror/js/codemirror.js'></script>

    <script type='text/javascript' src='js/app.popup.js'></script>
    <script type='text/javascript' src='js/app.tools.js'></script>
    <script type='text/javascript' src='js/app.project.js'></script>
    <script type='text/javascript' src='js/app.layer.js'></script>
    <script type='text/javascript' src='js/app.stylesheet.js'></script>
    <script type='text/javascript' src='js/app.reference.js'></script>
    <script type='text/javascript' src='js/app.datasource.js'></script>
    <script type='text/javascript' src='js/app.map.js'></script>
    <script type='text/javascript' src='js/app.js'></script>
    <script type='text/javascript' src='js/data.reference.js'></script>

    <!--
    @TODO head.js is causing problems with browser caches during development.
    <script type='text/javascript' src='js/libraries/head.min.js'></script>
    <script type='text/javascript'>
    head.js(
        'js/libraries/md5.js',
        'js/libraries/base64.js',
        'js/libraries/jquery.js',
        'js/libraries/underscore-min.js',
        'js/libraries/backbone.js',
        'js/libraries/jquery-ui.js',
        'js/libraries/ICanHaz.min.js',
        'js/openlayers/OpenLayers.js',
        'js/libraries/farbtastic.js',
        'js/codemirror/js/codemirror.js',

        'js/app.popup.js',
        'js/app.tools.js',
        'js/app.project.js',
        'js/app.layer.js',
        'js/app.stylesheet.js',
        'js/app.reference.js',
        'js/app.datasource.js',
        'js/app.map.js',
        'js/app.js',
        'js/data.reference.js',
    );
    </script>
    -->

    <script type='text/html' id='ProjectListView'>
    <div id='header' class='clearfix pane'>
      <h1>TileMill</h1>
      <span class='links'>
        <a class='info' href='#info'>About</a>
      </span>
    </div>
    <div id='content' class='clearfix'>
      <div id='main'>
        <ul class='pane projects clearfix'></ul>
      </div>
      <div id='sidebar'>
        <div class='pane'>
          <form id='projects' class='projects pane'>
            <h2>Add a project</h2>
            <p>Enter the name of your new project.</p>
            <input class='required text alphanum' type='text' />
            <input class='submit' type='submit' value='Add' />
          </form>
        </div>
      </div>
    </div>
    </script>

    <script type='text/html' id='LoadingView'>
      <div id='loading'>
        <div class='loading-text'>
          {{#message}}{{ message }}{{/message}}
        </div>
        <div class='loading'></div>
      </div>
    </script>

    <script type='text/html' id='ErrorView'>
      <div id='header' class='clearfix pane'>
        <h1>TileMill</h1>
        <a class='home' href='#'>Back home</a>
      </div>
      <div id='content' class='clearfix'>
          <div class='error-page'>{{ message }}</div>
      </div>
    </script>

    <script type='text/html' id='ProjectRowView'>
      <a href='#project/{{id}}'>
        <span class='thumb' style='background-image:url("{{ thumb }}")'></span>
        {{id}}
        <span class='icon delete'>Delete</span>
      </a>
    </script>

    <script type='text/html' id='ProjectView'>
      <div id='header' class='clearfix pane'>
        <h1>Editing {{ id }}</h1>
        <span class='links'>
          <a target='_blank' class='reference' href='#reference'>Reference</a>
        </span>
        <div class='actions clearfix'>
          <a class='save' href='#'>Save</a>
          <a class='info' href='#'>Info</a>
          <a class='minimal' href='#'>Minimal Mode</a>
          <a class='icon close' href='#'>Back home</a>
        </div>
      </div>
      <div id='main'></div>
      <div id='toolbar'></div>
      <div id='sidebar'></div>
    </script>

    <script type='text/html' id='LayerListView'>
      <div class='sidebar-header clearfix pane'>
        <h2>Layers</h2>
        <a title='Add a Layer' href='#' class='icon add'>+ Add</a>
      </div>
      <ul class='sidebar-content'></ul>
    </script>

    <script type='text/html' id='LayerRowView'>
      <div class='handle'></div>
      <a title='Delete Layer' class='icon delete' href='#'>Delete</a>
      <a title='Inspect Layer Values' class='icon inspect' href='#'>Inspect</a>
      <a title='Edit Layer Definition' class='icon edit' href='#'>Edit</a>
      <label>{{ name }}</label>
    </script>

    <script type='text/html' id='inspector'>
      <div id='inspector'>
        <div class='sidebar-header clearfix pane'>
          <h2>Inspector</h2>
          <a class='icon close' href='#'>Close</a>
        </div>
        <ul class='sidebar-content'>
        </ul>
      </div>
    </script>

    <script type='text/html' id='MapView'>
      <div id='map-preview-{{id}}'>
        <a class='icon map-fullscreen' href='#'>Fullscreen</a>
        <h4 id='zoom-display'>Zoom level ?</h4>
      </div>
    </script>

    <script type='text/html' id='StylesheetListView'>
      <div id='tabs'>
        <div class='stylesheets'></div>
        <a title='Add a Stylesheet Tab' class='icon add' href='#'>Add MSS</a>
      </div>
      <div id='editor' class='view'></div>
    </script>

    <script type='text/html' id='StylesheetTabView'>
      <span class='name'>{{ id }}</span>
      <span class='icon delete'>Delete</span>
    </script>

    <script type='text/html' id='StylesheetTabEditor'>
      <div class='editor'><textarea></textarea></div>
    </script>

    <script type='text/html' id='StylesheetTools'>
      <div class='tools pane'></div>
    </script>

    <script type='text/html' id='ColorPickerToolView'>
      <a class='icon color-picker' href='#color-picker'>Color picker</a>
      <input size='7' maxlength='7' class='color' type='text' class='text' />
      <div class='pane tilemill-farbtastic'></div>
    </script>

    <script type='text/html' id='FontPickerToolView'>
      <label>Fonts</label>
      <select class='fonts-list'>
      <option value=''>Select...</option>
      {{#fonts}}<option value='{{.}}'>{{.}}</option>{{/fonts}}
      </select>
    </script>

    <script type='text/html' id='ColorSwatchesToolView'>
      <div class='sidebar-header clearfix pane'>
        <h2>Colors</h2>
      </div>
      <div class='swatches clearfix pane'></div>
    </script>

    <script type='text/html' id='PopupView'>
      <div id='popup'>
        <div class='popup-backdrop'></div>
        <div class='popup'>
          <div class='popup-header clearfix pane'>
            <h2>{{ title }}</h2>
            <a href='#' class='icon close'>Close</a>
          </div>
          <div class='popup-content'>{{{ content }}}</div>
        </div>
      </div>
    </script>

    <script type='text/html' id='LayerPopupView'>
      <div id='popup-layer' class='clearfix pane'>
        <form id='form-layer'>
          <div class='messages'></div>
          <div><label for='id'>Id</label>
            <input type='text' class='text required' id='id' value='{{ id }}' />
          </div>
          <div><label for='class'>Class</label>
            <input type='text' class='text' id='class' value='{{ class }}'/>
          </div>
          <div>
            <label for='file'>Data Source</label>
            <input type='text' class='text required' id='file' value='{{ datasource_file }}' />
            <a class='icon expand-datasources' id='expand-datasources' title='See available datasources'>[+]</a>
            <div class='container datasources hidden'></div>
          </div>
          <div>
            <label for='srs'>SRS</label>
            <select id='srs'>
              <option value='auto'>Autodetect</option>
              <option value='&srs900913;'>900913</option>
              <option value='&srsWGS84;'>WGS84</option>
              <option value='custom'>Add custom</option>
            </select>
          </div>
          <div class='srs-custom'>
            <label for='srs-custom'>Custom</label>
            <input type='text' class='text' id='srs-custom' />
          </div>
          <div class='buttons'>
              <input class='submit' type='submit' value='Save' />
          </div>
        </form>
      </div>
    </script>

    <script type='text/html' id='popup_info_settings'>
      <div id='popup-info' class='clearfix pane'>
        <form>
          {{#settings}}
            <div><label>{{ key }}</label>
              <input class='text' type='text' value='{{val}}' />
            </div>
          {{/settings}}
        </form>
      </div>
    </script>

    <script type='text/html' id='PopupProjectInfo'>
      <div id='popup-info' class='clearfix pane'>
        <form>
          <div class='messages'></div>
          <div><label for='tilelive-url'>TileLive URL</label>
            <input id='tilelive-url' class='text' type='text' value='{{ tilelive_url }}' />
          </div>
          <div><label for='mml-url'>MML URL</label>
            <input id='mml-url' class='text' type='text' value='{{ mml_url }}' />
          </div>
          <div>
            <label for='polymaps'>Polymaps</label>
            <textarea class='code-snippet'>
var po = org.polymaps;
var map = po.map()
    .container(document.getElementById('map').appendChild(po.svg('svg')))
    .add(po.interact())
    .add(po.hash())
    // layer setup
    .add(po.image()
    .url(po.url({{ tilelive_url }}
    + '/{Z}/{X}/{Y}.png')
    ))
    // end layer setup
    .add(po.compass()
    .pan('none'));
</textarea>
        </div>
        <div><label for='openlayers'>OpenLayers</label>
            <textarea class='code-snippet'>
var layer = new OpenLayers.Layer('layer', {{ tilelive_url }}, { sphericalMercator: true });
            </textarea>
          </div>
        </form>
      </div>
    </script>

    <script type='text/html' id='StylesheetPopupView'>
      <div id='popup-stylesheet' class='clearfix pane'>
        <form>
          <div class='messages'></div>
          <div>
            <label for='stylesheet-name'>Name</label>
            <input id='stylesheet-name' class='text required' type='text' />
          </div>
          <div class='buttons'>
            <input class='submit' type='submit' value='Add stylesheet' />
          </div>
        </form>
      </div>
    </script>

    <script type='text/html' id='font'>
      <option>{{ font }}</option>
    </script>

    <script type='text/html' id='PopupMessage'>
      <div id='popup-message' class='clearfix pane {{ type }}'>
        {{ message }}
      </div>
    </script>

    <script type='text/html' id='color_swatch'>
      <a href='#' class='swatch' style='background-color: {{ color }}'><label>{{ color }}</label></a>
    </script>

    <script type='text/html' id='inspector_field'>
      <li id='field-{{ field }}'>
        <a class='icon values' href='#'>See values</a>
        {{#visualize}}
          <a class='visualization-type icon unique'
            href='#'>Unique Value</a>
          <a class='visualization-type icon label'
            href='#'>Label</a>
          <a class='visualization-type icon choropleth'
            href='#'>Choropleth</a>
          <a class='visualization-type icon scaledPoints'
            href='#'>Scaled points</a>
        {{/visualize}}
        <strong>{{ field }}</strong>
        <em>{{ type }}</em>
      </li>
    </script>

    <script type='text/html' id='inspector_values'>
      <div class='inspect-values'>
        <ul class='clearfix inspect-values field-values'>
          <li class='min'><strong>Min</strong> {{ min }}</li>
          <li class='max'><strong>Max</strong> {{ max }}</li>
        </ul>
        <div class='pager clearfix'>
          <a class='icon prev {{ class_prev }}' href='#'>Prev</a>
          <a class='icon next {{ class_next }}' href='#'>Next</a>
        </div>
      </div>
    </script>

    <script type='text/html' id='ReferenceView'>
      <div id='header' class='clearfix pane'>
        <h1>Reference</h1>
        <div class='actions clearfix'>
          <a class='icon close' href='#'>Close</a>
        </div>
      </div>
      <div id='main'>
        <div id='main-content' class='pane'></div>
      </div>
      <div id='sidebar'>
        <div class='reference-help pane'>
          <p>TileMill supports the <a href='https://github.com/mapnik/Cascadenik'>Cascadenik</a>
          styling language. It should be familiar to <a href='http://www.w3schools.com/css/'>CSS</a>
          users and easy to pick up for everyone else.</p>
          <p>A simple Cascadenik style looks like</p>
<pre>
#world {
  polygon-fill: #eee;
  line-color: #ccc;
  line-width: 0.5;
}
</pre>
          <p>Which is the <em>selector</em> <code>#world</code>
          - which makes this affect the layer with the id <code>world</code>,
          and then three <em>declarations</em> which color the countries 
          the color <code>#eee</code> and give them a grey line <code>0.5</code>
          units wide.</p>

          <p>There are other selectors you can use to affect different parts of a map</p>

          <ul>
              <li><code>* { }</code>: All layers
              <li><code>.red { }</code>: Only layers with the class 'red'
              <li><code>.blue[zoom>8] { }</code> Only layers with the class blue, zoomed beyond 8
              <li><code>#countries NAME { }</code> Country names, from a layer with id country an a 
          property called NAME
          </ul>
        </div>
      </div>
    </script>

    <script type='text/html' id='data'>
      <div id='header' class='clearfix pane'>
        <h1>Data</h1>
        <a class='home' href='#'>Back home</a>
      </div>
      <div id='main'>
        <div id='main-content'>
          <div id='providers'>
          </div>
        </div>
      </div>
      <div id='sidebar'>
      </div>
    </script>

    <script type='text/html' id='DatasourceRow'>
      <span class='name'>{{ id }}</span>
      <span class='metadata'>{{ bytes }}</span>
      <span class='url'>{{ url }}</span>
    </script>

    <script type='text/html' id='reference_symbolizer'>
      <div class='reference-symbolizer'>
        <h2>{{ symbolizer }}</h2>
        <table class='reference-table'>
          <thead>
            <tr>
              <th>css parameter</th>
              <th>type</th>
              <th>default value</th>
            </tr>
          </thead>
          {{#properties}}
            {{>reference_property}}
          {{/properties}}
        </table>
      </div>
    </script>

    <script type='text/html' class='partial' id='reference_property'>
      <tr>
        <th>{{ css }}
          {{#doc}}
            <span class='reference-doc-available'>?</span>
            <div class='reference-doc'>
              {{ doc }}
            </div>
          {{/doc}}
        </th>
        <td>{{ type }}</td>
        <td>{{ default_value }}
          {{#default_meaning}}
            <small class='reference-default-meaning'>({{ default_meaning }})</small>
          {{/default_meaning}}
        </td>
      </tr>
    </script>

    <script type='text/html' id='quick_reference'>
      <div id='quick-reference'>
        <strong>{{ css }}</strong>: {{ type }} <span class='default'>(default {{ default-value }})</span>
        <p>{{#doc}}
          {{ doc }}
        {{/doc}}</p>
      </div>
    </script>
  </head>

  <body>
    <div id='app'></div>
  </body>
</html>

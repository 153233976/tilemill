<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
    <title>TileMill</title>
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
    <link rel='stylesheet' href='css/reset.css' type='text/css'/>
    <link rel='stylesheet' href='css/tilemill.css' type='text/css'/>

    <script type="text/javascript" src="js/libraries/base64.js"></script>
    <script type="text/javascript" src="js/libraries/jquery.js"></script>
    <script type="text/javascript" src="js/libraries/underscore-min.js"></script>
    <script type="text/javascript" src="js/libraries/jquery-ui.js"></script>
    <script type="text/javascript" src="js/libraries/jquery.jsonp-2.1.4.min.js"></script>
    <script type="text/javascript" src="js/libraries/jquery.url.js"></script>
    <script type="text/javascript" src="js/libraries/jquery.bbq.js"></script>
    <script type="text/javascript" src="js/libraries/jquery.validate.pack.js"></script>
    <script type="text/javascript" src="js/libraries/jquery.validate.additional-methods.js"></script>
    <script type="text/javascript" src="js/openlayers/OpenLayers.js"></script>
    <script type="text/javascript" src="js/libraries/farbtastic.js"></script>
    <script type="text/javascript" src="js/codemirror/js/codemirror.js"></script>

    <script type="text/javascript" src="js/tilemill.js"></script>

    <script type="text/javascript" src="js/callbacks/list.js"></script>
    <script type="text/javascript" src="js/callbacks/project.js"></script>
    <script type="text/javascript" src="js/callbacks/visualization.js"></script>
    <script type="text/javascript" src="js/callbacks/reference.js"></script>

    <script type="text/javascript" src="js/includes/template.js"></script>
    <script type="text/javascript" src="js/includes/cache.js"></script>
    <script type="text/javascript" src="js/includes/popup.js"></script>
    <script type="text/javascript" src="js/includes/backend.js"></script>
    <script type="text/javascript" src="js/includes/queue.js"></script>
    <script type="text/javascript" src="js/includes/mml.js"></script>
    <script type="text/javascript" src="js/includes/inspector.js"></script>
    <script type="text/javascript" src="js/includes/stylesheet.js"></script>
    <script type="text/javascript" src="js/includes/color.js"></script>
    <script type="text/javascript" src="js/includes/map.js"></script>

    <!-- This file is optional - it can contain JS settings -->
    <script type="text/javascript" src="settings.js"></script>

    <script type="text/html" name="page-loading">
    <div id='header' class='clearfix pane'>
      <h1>TileMill</h1>
    </div>
    <div class="loading-text">loading page</div>
    <div class="loading page-loading"></div>
    </script>

    <script type="text/html" name="loading">
        <div class="loading-text"><% if (typeof message !== "undefined") { %>message<% } %></div>
    <div class="loading"></div>
    </script>

    <script type="text/html" name="list">
    <div id='header' class='clearfix pane'>
      <h1>TileMill</h1>
      <a class='info' href='#info'>Info</a>
    </div>
    <div id='content' class='clearfix'>
      <%= projects %>
      <%= visualizations %>
    </div>
    </script>

    <script type="text/html" name="error-page">
    <div id='header' class='clearfix pane'>
      <h1>TileMill</h1>
      <a class='home' href='#action=list'>Back home</a>
    </div>
    <div id='content' class='clearfix'>
      <div class='error-page'><%= message %></div>
    </div>
    </script>

    <script type="text/html" name="column">
    <div class='column' id='<%= type %>'>
      <h2 class='pane'><%= name %></h2>
      <ul class='items'>
        <% for (i in data) { %>
          <li class='clearfix'>
            <a href='#delete=<%= type %>/<%= data[i] %>' class='file-delete'>Delete</a>
            <a href='#action=<%= type %>&id=<%= data[i] %>' class='route'><%= data[i] %></a>
          </li>
        <% } %>
        <li class='form'>
          <form id='<%= type %>'>
            <div class='messages'></div>
            <% if (type === "visualization") { %>
              <label>Shapefile URL</label>
            <% } else { %>
              <label>Name</label>
            <% } %>
            <input class='<%= (type === "visualization") ? "url2" : "" %> required text' type='text' />
            <input class='submit' type='submit' value='Add <%= type %>' />
          </form>
        </li>
      </ul>
    </div>
    </script>

    <script type="text/html" name="project">
    <div id='header' class='clearfix pane'>
      <h1>Editing <%= id %></h1>
      <a class='info' href='#project-info'>Info</a>
      <a class='minimal' href='#minimal'>Minimal Mode</a>
      <a target='_blank' class='reference' href='#action=reference'>Reference</a>
      <a class='save' href='#project-save'>Save</a>
      <a class='home' href='#action=list'>Back home</a>
      <a class='status' href='#status'>Status</a>
    </div>
    <div id='main'></div>
    <div id='sidebar'></div>
    </script>

    <script type="text/html" name="visualization">
    <div id='header' class='clearfix pane'>
      <h1>Visualizing <%= id %></h1>
      <a class='info' href='#project-info'>Info</a>
      <a class='projectify' href='#project-save'>Make project</a>
      <a class='home' href='#action=list'>Back home</a>
    </div>
    <div id='main'></div>
    <div id='sidebar'></div>
    </script>

    <script type="text/html" name="layers">
    <div id='layers'>
      <div class='sidebar-header clearfix pane'>
        <h2>Layers</h2>
        <a title="Add a Layer" href="#layers-add" id="layers-add">+ Add</a>
      </div>
      <ul class='sidebar-content'>
      </ul>
    </div>
    </script>

    <script type="text/html" name="layers-li">
    <li>
      <div class="handle"></div>
      <input class="checkbox" type="checkbox" <%= (status) ? "checked='checked'" : "" %> />
      <a title="Delete Layer" class="layer-delete" href="#">Delete</a>
      <a title="Inspect Layer Values" class="layer-inspect" href="#">Inspect</a>
      <a title="Edit Layer Definition" class="layer-edit" href="#">Edit</a>
      <label><%= name %></label>
    </li>
    </script>

    <script type="text/html" name="inspector">
    <div id='inspector'>
      <div class='sidebar-header clearfix pane'>
        <h2>Inspector</h2>
        <a class='inspector-close' href="#">Close</a>
      </div>
      <ul class='sidebar-content'>
      </ul>
    </div>
    </script>

    <script type="text/html" name="map">
    <div id='map-preview'>
      <a class="map-fullscreen" href="#map-fullscreen">Fullscreen</a>
      <h4 id='zoom-display'>Zoom level ?</h4>
    </div>
    </script>

    <script type="text/html" name="stylesheets">
    <div id='tabs'>
      <div class='stylesheets'></div>
      <a title="Add a Stylesheet Tab" class='tab-add' href='#'>Add MSS</a>
    </div>
    <div id='editor'>
      <textarea id='code'></textarea>
    </div>
    </script>

    <script type="text/html" name="color">
    <div id='color-palette' class='pane'>
      <div id='color-picker' class='pane'>
        <a class='color-picker' href='#color-picker'>Color picker</a>
        <input size='7' maxlength='7' id='color' type='text' class='text' />
        <div class='pane' id='farbtastic'></div>
      </div>
      <div id='fonts'>
        <label>Fonts</label>
        <select id='fonts-list'></select>
      </div>
      <div id='colors'>
        <label>Colors</label>
        <div></div>
      </div>
    </div>
    </script>

    <script type="text/html" name="popup">
    <div id="popup">
      <div class="popup-backdrop"></div>
      <div class="popup">
        <div class="popup-header clearfix pane">
          <h2><%= title %></h2>
          <a href="#" class="popup-close">Close</a>
        </div>
        <div class="popup-content"></div>
      </div>
    </div>
    </script>
    <script type="text/html" name="popup-layer">
    <div id='popup-layer' class='clearfix pane'>
      <form id='form-layer'>
        <div class='messages'></div>
        <div><label for="id">Id</label>
            <input type="text" class="text required" id="id" />
        </div>
        <div><label for="classes">Classes</label>
            <input type="text" class="text" id="classes" />
        </div>
        <div>
            <label for="file">Data Source</label>
            <input type="text" class="text required" id="file" />
            <a id='expand-datasources' title='See available datasources'>[+]</a>
            <div style='display:none;' id='form-providers'></div>
        </div>
        <div>
          <label for="srs">SRS</label>
          <select id="srs">
            <option value="auto">Autodetect</option>
            <option value="&srs900913;">900913</option>
            <option value="&srsWGS84;">WGS84</option>
            <option value="custom">Add custom</option>
          </select>
        </div>
        <div class='srs-custom'>
          <label for="srs-custom">Custom</label>
          <input type="text" class="text" id="srs-custom" />
        </div>
        <div class='buttons'>
            <input class='submit' type='submit' value='<%= submit %>' />
        </div>
      </form>
    </div>
    </script>
    <script type="text/html" name="popup-info-settings">
    <div id='popup-info' class='clearfix pane'>
      <form>
        <% for (key in settings) { %>
            <div><label><%= key %></label>
                <input class='text' type='text' value='<%= settings[key] %>' />
            </div>
        <% } %>
      </form>
    </div>
    </script>
    <script type="text/html" name="popup-info-project">
    <div id='popup-info' class='clearfix pane'>
      <form>
        <div class='messages'></div>
        <div><label for='tilelive-url'>TileLive URL</label>
            <input id='tilelive-url' class='text' type='text' value='<%= tilelive_url %>' />
        </div>
        <div><label for='mml-url'>MML URL</label>
            <input id='mml-url' class='text' type='text' value='<%= mml_url %>' />
        </div>
        <div>
            <label for='polymaps'>Polymaps</label>
            <textarea class='code-snippet'>
var po = org.polymaps;

var map = po.map()
    .container(document.getElementById("map").appendChild(po.svg("svg")))
    .add(po.interact())
    .add(po.hash())
    // layer setup
    .add(po.image()
    .url(po.url(<%= tilelive_url %>
    + "/{Z}/{X}/{Y}.png")
    ))
    // end layer setup
    .add(po.compass()
    .pan("none"));
</textarea>
</div>
<div>       <label for='openlayers'>OpenLayers</label>
            <textarea class='code-snippet'>
                var layer = new OpenLayers.Layer('layer', <%= tilelive_url %>, { sphericalMercator: true });
</textarea>
        </div>
      </form>
    </div>
    </script>
    <script type="text/html" name="popup-info-visualization">
    <div id='popup-info' class='clearfix pane'>
      <form>
        <div class='messages'></div>
        <div>
            <label for='datasource-url'>Datasource</label>
            <input id='datasource-url' disabled='disabled' 
                class='text' type='text' value='<%= datasource_url %>' />
        </div>
        <div>
            <label for='tilelive-url'>TileLive URL</label>
            <input id='tilelive-url' class='text' type='text' value='<%= tilelive_url %>' />
        </div>
        <div>
            <label for='mml-url'>MML URL</label>
            <input id='mml-url' class='text' type='text' value='<%= mml_url %>' />
        </div>
        <div><label for='choropleth-split'>Choropleth</label>
          <select id='choropleth-split'>
            <option value='2'>2 shades</option>
            <option value='3'>3 shades</option>
            <option value='4'>4 shades</option>
            <option value='5'>5 shades</option>
            <option value='6'>6 shades</option>
            <option value='7'>7 shades</option>
            <option value='8'>8 shades</option>
            <option value='9'>9 shades</option>
            <option value='10'>10 shades</option>
          </select>
        </div>
      </form>
    </div>
    </script>
    <script type="text/html" name="popup-stylesheet">
    <div id='popup-stylesheet' class='clearfix pane'>
      <form>
        <div class='messages'></div>
        <div>
            <label for='stylesheet-name'>Name</label>
            <input id='stylesheet-name' class='text required' type='text' />
        </div>
        <div class='buttons'>
            <input class='submit' type='submit' value='Add stylesheet' />
        </div>
      </form>
    </div>
    </script>
    <script type="text/html" name="popup-projectify">
    <div id='popup-projectify' class='clearfix pane'>
      <form>
        <div class='messages'></div>
        <div>
            <label for='stylesheet-name'>Name</label>
            <input id='project-name' class='text required' type='text' />
        </div>
        <div class='buttons'>
            <input class='submit' type='submit' value='Make project' />
        </div>
      </form>
    </div>
    </script>
    <script type="text/html" name="font">
        <option><%= font %>
    </script>
    <script type="text/html" name="popup-message">
    <div id='popup-message' class='clearfix pane <%= type %>'>
      <%= content %>
    </div>
    </script>
    <script type="text/html" name="color-swatch">
    <a href='#' class='swatch' style='background-color: <%= color %>'><label><%= color %></label></a>
    </script>
    <script type="text/html" name="inspector-field">
    <li id='field-<%= field %>'>
      <a class='inspect-values' href='#inspect-values'>See values</a>
      <% if (visualize) { %>
        <a class='visualization-type inspect-unique' href='#inspect-unique'>Unique Value</a>
        <a class='visualization-type inspect-label' href='#inspect-label'>Label</a>
        <a class='visualization-type inspect-choropleth' href='#inspect-choropleth'>Choropleth</a>
        <a class='visualization-type inspect-scaledPoints' href='#inspect-scaled-points'>Scaled points</a>
      <% } %>
      <strong><%= field %></strong>
      <em><%= type %></em>
    </li>
    </script>
    <script type="text/html" name="inspector-values">
    <div class='inspect-values'>
      <ul class='clearfix inspect-values field-values'>
        <li class='min'><strong>Min</strong> <%= min %></li>
        <li class='max'><strong>Max</strong> <%= max %></li>
      </ul>
      <div class='pager clearfix'>
        <a class='pager-prev <%= class_prev %>' href='#pager-prev'>Prev</a>
        <a class='pager-next <%= class_next %>' href='#pager-next'>Next</a>
      </div>
    </div>
    </script>

    <script type="text/html" name="reference">
      <div id='header' class='clearfix pane'>
        <h1>Reference</h1>
        <a class='home' href='#action=list'>Back home</a>
      </div>
      <div id='main'>
        <div id='main-content'>
        </div>
      </div>
      <div id='sidebar'>
        <div class='reference-help'>
          <p>TileMill supports the <a href="https://github.com/mapnik/Cascadenik">Cascadenik</a>
          styling language. It should be familiar to <a href="http://www.w3schools.com/css/">CSS</a>
          users and easy to pick up for everyone else.</p>
          <p>A simple Cascadenik style looks like</p>
<pre>
#world {<br />
  polygon-fill: #eee;<br />
  line-color: #ccc;<br />
  line-width: 0.5;<br />
}
</pre>
          <p>Which is the <em>selector</em> <code>#world</code>
          - which makes this affect the layer with the id <code>world</code>,
          and then three <em>declarations</em> which color the countries 
          the color <code>#eee</code> and give them a grey line <code>0.5</code>
          units wide.</p>

          <p>There are other selectors you can use to affect different parts of a map</p>

          <ul>
              <li><code>* { }</code>: All layers
              <li><code>.red { }</code>: Only layers with the class 'red'
              <li><code>.blue[zoom>8] { }</code> Only layers with the class blue, zoomed beyond 8
              <li><code>#countries NAME { }</code> Country names, from a layer with id country an a 
          property called NAME
          </ul>
        </div>
      </div>
    </script>



    <script type="text/html" name="data">
      <div id='header' class='clearfix pane'>
        <h1>Data</h1>
        <a class='home' href='#action=list'>Back home</a>
      </div>
      <div id='main'>
        <div id='main-content'>
          <div id='providers'>
          </div>
        </div>
      </div>
      <div id='sidebar'>
      </div>
    </script>

    <script type="text/html" name="data-provider">
      <h3><%= name %></h3>
      <%= datasources %>
    </script>

    <script type="text/html" name="data-datasource">
      <div class='datasource'>
        <%= name %>
        <small>(<%= bytes %> bytes)</small>
        <span class='url'><%= url %></span>
      </div>
    </script>

    <script type="text/html" name="reference-symbolizer">
      <div class='reference-symbolizer'>
        <h2><%= symbolizer %></h2>
        <table class='reference-table'>
          <thead>
              <tr>
                  <th>css parameter</th>
                  <th>type</th>
                  <th>default value</th>
              </tr>
          </thead>
          <%= properties %>
        </table>
      </div>
    </script>
    <script type="text/html" name="reference-property">
      <tr>
          <th><%= css %>
            <% if(doc) { %>
              <span class='reference-doc-available'>?</span>
              <div class='reference-doc'>
                  <%= doc %>
              </div>
            <% } %>
          </th>
          <td><%= type %></td>
          <td><%= default_value %><% if(default_meaning) { %><small class='reference-default-meaning'>(<%= default_meaning %>)</small><% } %></td>
      </tr>
    </script>
  </head>
  <body>
    <div class="loading">
    </div>
  </body>
</html>
